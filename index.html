<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Tap Game</title>

<style>
body{
  margin:0;
  padding:0;
  background:#0f0f0f;
  color:white;
  font-family:Arial;
  text-align:center;
}

.profile{
  margin-top:15px;
  font-size:16px;
  opacity:0.9;
}

.coin{
  width:220px;
  height:220px;
  border-radius:50%;
  background:radial-gradient(circle,#ffd700,#b8860b);
  margin:40px auto;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:90px;
  cursor:pointer;
  user-select:none;
  box-shadow:0 0 30px gold;
  transition:transform 0.1s;
}

.coin:active{
  transform:scale(0.95);
}

.score{
  font-size:32px;
}
</style>
</head>

<body>

<h2 id="title">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø©</h2>

<div class="profile" id="profile"></div>

<div class="coin" onclick="tap()">ğŸª™</div>

<div class="score">
  <span id="score">0</span>
</div>

<script>
// ===== Ø¨ÙŠØ§Ù†Ø§Øª ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… =====
let tgUser = null;
let userId = "guest";
let userName = "Guest";
let lang = "en";

if (window.Telegram && Telegram.WebApp) {
  Telegram.WebApp.ready();
  tgUser = Telegram.WebApp.initDataUnsafe.user;

  if(tgUser){
    userId = tgUser.id;
    userName = tgUser.username || tgUser.first_name;
    lang = tgUser.language_code || "en";
  }
}

// ===== Ø§Ù„Ù„ØºØ© =====
if(lang === "ar"){
  document.getElementById("title").innerText = "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø©";
}else{
  document.getElementById("title").innerText = "Tap the coin";
}

// ===== Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø³Ø§Ø¨ =====
document.getElementById("profile").innerText =
  "ğŸ‘¤ " + userName + " | ID: " + userId;

// ===== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… =====
let storageKey = "score_" + userId;
let score = localStorage.getItem(storageKey);
if(score === null){
  score = 0;
}else{
  score = parseInt(score);
}
document.getElementById("score").innerText = score;

// ===== Ù…Ù†Ø¹ Ø§Ù„ØºØ´: Ø­Ø¯ Ø§Ù„Ø¶ØºØ· ÙÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠØ© =====
let lastTap = 0;
const tapCooldown = 200; // 200ms = 5 Ø¶ØºØ·Ø§Øª ÙÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠØ©

function tap(){
  let now = Date.now();
  if(now - lastTap < tapCooldown){
    // ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¶ØºØ· Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¬Ø¯Ù‹Ø§
    return;
  }
  lastTap = now;

  score++;
  document.getElementById("score").innerText = score;
  localStorage.setItem(storageKey, score);
}
</script>

</body>
</html>
