<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>MTM Coin Ultimate</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<style>
body{margin:0;padding:0;background:#1c1c1c;color:white;font-family:Arial;text-align:center;overflow:hidden;}
.profile{margin-top:10px;font-size:16px;opacity:0.9;}
.coin{width:120px;height:120px;border-radius:50%;position:absolute;cursor:pointer;transition:transform 0.1s;}
.score{font-size:22px;margin-top:5px;}
button{margin:5px;padding:8px 12px;font-size:14px;border:none;border-radius:8px;cursor:pointer;color:white;box-shadow:0 0 6px #00ff00;transition:all 0.2s;}
button:hover{transform:scale(1.05);box-shadow:0 0 10px #00ff00;}
#upgradeBtn{background:#228b22;}#dailyBtn{background:#1e90ff;}#taskBtn{background:#ff8c00;}#adBtn{background:#ff1493;}#secretBtn{background:#8b00ff;}#instaBtn{background:#e1306c;}button:disabled{background:#555;box-shadow:none;cursor:not-allowed;}
.task-list{margin-top:5px;font-size:12px;text-align:left;display:inline-block;}
.task-list li.completed{color:lime;font-weight:bold;}
.leaderboard{margin-top:10px;display:inline-block;text-align:left;}
.leaderboard h3{text-align:center;font-size:16px;}
.bubble{position:absolute;width:20px;height:20px;border-radius:50%;background:gold;animation:bubbleUp 1s forwards;}
@keyframes bubbleUp{0%{opacity:1;transform:translateY(0px) scale(1);}100%{opacity:0;transform:translateY(-100px) scale(0.5);}}
/* Bottom Bar */
#bottomBar{position:fixed;bottom:0;left:0;width:100%;background:#222;padding:10px 0;display:flex;justify-content:space-around;align-items:center;box-shadow:0 -3px 10px #000;}
#bottomBar button{margin:0 5px;font-size:14px;padding:6px 10px;}
#bottomBar .scoreDisplay{color:gold;font-weight:bold;font-size:16px;}
</style>
</head>
<body>

<h2 id="title">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø©</h2>
<div class="profile" id="profile"></div>

<!-- Ø§Ù„Ø¹Ù…Ù„Ø© -->
<img id="coinImg" class="coin" src="coin.png" alt="MTM Coin">

<!-- Bottom Bar -->
<div id="bottomBar">
  <button id="upgradeBtn" onclick="upgrade()">ØªØ±Ù‚ÙŠØ© (+1)</button>
  <button id="dailyBtn" onclick="dailyBonus()">Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ÙŠÙˆÙ…</button>
  <button id="taskBtn" onclick="taskFollowChannel()">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù‚Ù†Ø§Ø©</button>
  <span class="scoreDisplay">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></span>
</div>

<h3>Ù…Ù‡Ø§Ù… ÙŠÙˆÙ…ÙŠØ©:</h3>
<ul class="task-list">
  <li id="task1">ğŸ”¹ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ©</li>
  <li id="task2">ğŸ”¹ Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ÙŠÙˆÙ…</li>
  <li id="task3">ğŸ”¹ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¥Ø¹Ù„Ø§Ù†</li>
  <li id="task4">ğŸ”¹ Ù…Ù‡Ù…Ø© Ø³Ø±ÙŠØ©</li>
  <li id="task5">ğŸ”¹ Ù…ØªØ§Ø¨Ø¹Ø© MTM Coin Ø¹Ù„Ù‰ Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…</li>
</ul>

<div class="leaderboard">
  <h3>ğŸ† Leaderboard</h3>
  <ol id="leaderboardList"></ol>
</div>

<div class="info" id="referralInfo"></div>

<!-- Ø§Ù„Ø£ØµÙˆØ§Øª -->
<audio id="tapSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="upgradeSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="bonusSound" src="https://actions.google.com/sounds/v1/cartoon/coin_drop.ogg"></audio>
<audio id="referralSound" src="https://actions.google.com/sounds/v1/cartoon/coins.ogg"></audio>
<audio id="adSound" src="https://actions.google.com/sounds/v1/cartoon/arcade_game_button.ogg"></audio>
<audio id="secretSound" src="https://actions.google.com/sounds/v1/cartoon/metal_hit.ogg"></audio>
<audio id="instaSound" src="https://actions.google.com/sounds/v1/cartoon/bling.ogg"></audio>

<script>
// ===== Firebase Config =====
const firebaseConfig = {apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT_ID.firebaseapp.com",databaseURL:"https://YOUR_PROJECT_ID.firebaseio.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT_ID.appspot.com",messagingSenderId:"SENDER_ID",appId:"APP_ID"};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ===== Ø¨ÙŠØ§Ù†Ø§Øª ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… =====
let tgUser=null,userId="guest",userName="Guest",lang="en";
if(window.Telegram && Telegram.WebApp){Telegram.WebApp.ready();tgUser=Telegram.WebApp.initDataUnsafe.user;if(tgUser){userId=tgUser.id;userName=tgUser.username||tgUser.first_name;lang=tgUser.language_code||"en";}}
document.getElementById("profile").innerText="ğŸ‘¤ "+userName+" | ID: "+userId;
if(lang==="ar"){document.getElementById("title").innerText="Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„Ø©";}

// ===== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© =====
let scoreKey="score_"+userId,powerKey="tapPower_"+userId,lastDailyKey="daily_"+userId,
taskFollowKey="taskFollow_"+userId,taskAdKey="taskAd_"+userId,taskSecretKey="taskSecret_"+userId,taskInstaKey="taskInsta_"+userId;
let score=parseInt(localStorage.getItem(scoreKey))||0;
let tapPower=parseInt(localStorage.getItem(powerKey))||1;
document.getElementById("score").innerText=score;

// ===== Ø§Ù„Ø£ØµÙˆØ§Øª =====
const tapSound=document.getElementById("tapSound"),upgradeSound=document.getElementById("upgradeSound"),
bonusSound=document.getElementById("bonusSound"),referralSound=document.getElementById("referralSound"),
adSound=document.getElementById("adSound"),secretSound=document.getElementById("secretSound"),
instaSound=document.getElementById("instaSound");

// ===== Ø­Ø±ÙƒØ© Ø§Ù„Ø¹Ù…Ù„Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© =====
const coin = document.getElementById("coinImg");
function moveCoinRandomly(){
  const x = Math.random()*(window.innerWidth-120);
  const y = Math.random()*(window.innerHeight-250);
  coin.style.left = x+"px";
  coin.style.top = y+"px";
}
setInterval(moveCoinRandomly,3000);
moveCoinRandomly();

// ===== Ø¬Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· =====
let lastTap=0; const tapCooldown=200;
coin.onclick=function(){
  let now=Date.now(); if(now-lastTap<tapCooldown)return; lastTap=now;
  score+=tapPower; localStorage.setItem(scoreKey,score);
  document.getElementById("score").innerText=score;
  tapSound.play(); animateBubble(); updateLeaderboard();
}

// ===== ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù‚ÙˆØ© =====
const upgradeCost=20;
function upgrade(){if(score>=upgradeCost){score-=upgradeCost;tapPower++;localStorage.setItem(scoreKey,score);localStorage.setItem(powerKey,tapPower);document.getElementById("score").innerText=score;updateUpgradeBtn();upgradeSound.play();updateLeaderboard();}}
function updateUpgradeBtn(){document.getElementById("upgradeBtn").disabled=(score<upgradeCost);}
updateUpgradeBtn();

// ===== Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ÙŠÙˆÙ… =====
function dailyBonus(){let today=new Date().toDateString();let last=localStorage.getItem(lastDailyKey);if(last===today){alert(lang==="ar"?"Ù„Ù‚Ø¯ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ÙŠÙˆÙ… Ø¨Ø§Ù„ÙØ¹Ù„!":"Daily bonus already claimed!");return;}let bonus=50;score+=bonus;localStorage.setItem(scoreKey,score);localStorage.setItem(lastDailyKey,today);document.getElementById("score").innerText=score;alert(lang==="ar"?`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${bonus} Ù†Ù‚Ø·Ø©!`:`${bonus} points added!`);markTaskCompleted("task2");bonusSound.play();updateLeaderboard();}

// ===== Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù… =====
function taskFollowChannel(){if(localStorage.getItem(taskFollowKey)){alert(lang==="ar"?"Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ù…Ù‡Ù…Ø© Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù‚Ù†Ø§Ø© Ù…Ø³Ø¨Ù‚Ù‹Ø§!":"Task already completed!");return;}let bonus=30;score+=bonus;localStorage.setItem(scoreKey,score);localStorage.setItem(taskFollowKey,true);document.getElementById("score").innerText=score;alert(lang==="ar"?`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${bonus} Ù†Ù‚Ø·Ø© Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù‚Ù†Ø§Ø©!`:`${bonus} points for following the channel!`);markTaskCompleted("task1");bonusSound.play();window.open("https://t.me/MTM_coin","_blank");updateLeaderboard();}
function taskWatchAd(){if(localStorage.getItem(taskAdKey)){alert(lang==="ar"?"Ù„Ù‚Ø¯ Ø´Ø§Ù‡Ø¯Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù…Ø³Ø¨Ù‚Ù‹Ø§ Ø§Ù„ÙŠÙˆÙ…!":"Ad task already completed!");return;}let bonus=20;score+=bonus;localStorage.setItem(scoreKey,score);localStorage.setItem(taskAdKey,true);document.getElementById("score").innerText=score;alert(lang==="ar"?`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${bonus} Ù†Ù‚Ø·Ø© Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†!`:`${bonus} points for watching ad!`);markTaskCompleted("task3");adSound.play();updateLeaderboard();}
function taskSecret(){if(localStorage.getItem(taskSecretKey)){alert(lang==="ar"?"Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø³Ø±ÙŠØ© Ù…Ø³Ø¨Ù‚Ù‹Ø§!":"Secret task already completed!");return;}let bonus=40;score+=bonus;localStorage.setItem(scoreKey,score);localStorage.setItem(taskSecretKey,true);document.getElementById("score").innerText=score;alert(lang==="ar"?`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${bonus} Ù†Ù‚Ø·Ø© Ù„Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø³Ø±ÙŠØ©!`:`${bonus} points for secret task!`);markTaskCompleted("task4");secretSound.play();updateLeaderboard();}
function taskFollowInstagram(){if(localStorage.getItem(taskInstaKey)){alert(lang==="ar"?"Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ù…Ù‡Ù…Ø© Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù… Ù…Ø³Ø¨Ù‚Ù‹Ø§!":"Instagram task already completed!");return;}let bonus=35;score+=bonus;localStorage.setItem(scoreKey,score);localStorage.setItem(taskInstaKey,true);document.getElementById("score").innerText = score;alert(lang==="ar"?`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${bonus} Ù†Ù‚Ø·Ø© Ù„Ù…ØªØ§Ø¨Ø¹Ø© MTM Coin Ø¹Ù„Ù‰ Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…!`:`${bonus} points for following MTM Coin on Instagram!`);markTaskCompleted("task5");instaSound.play();window.open("https://www.instagram.com/coinmtm?igsh=MWQ1NHhlNXYyc29kZA==","_blank");updateLeaderboard();}

// ===== ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© =====
function markTaskCompleted(taskId){document.getElementById(taskId).classList.add("completed");}

// ===== ÙÙ‚Ø§Ø¹Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· =====
function animateBubble(){let bubble=document.createElement("div");bubble.className="bubble";bubble.style.left=(parseInt(coin.style.left)+50)+"px";bubble.style.top=(parseInt(coin.style.top)+50)+"px";document.body.appendChild(bubble);setTimeout(()=>{document.body.removeChild(bubble);},1000);}

// ===== Ø¥Ø­Ø§Ù„Ø§Øª =====
let urlParams=new URLSearchParams(window.location.search);let ref=urlParams.get('ref');
if(ref&&ref!==String(userId)){let refKey="score_"+ref;let refScore=parseInt(localStorage.getItem(refKey))||0;let bonus=20;localStorage.setItem(refKey,refScore+bonus);referralSound.play();document.getElementById("referralInfo").innerText=lang==="ar"?`ğŸ ØªÙ… Ù…Ù†Ø­ ØµØ§Ø­Ø¨ Ø§Ù„Ø±Ø§Ø¨Ø· ${bonus} Ù†Ù‚Ø·Ø©!`:`ğŸ Referral bonus added: ${bonus} points!`;}
document.getElementById("referralInfo").innerHTML+=`<br>${lang==="ar"?"Ø±Ø§Ø¨Ø· Ø¥Ø­Ø§Ù„ØªÙƒ":"Your referral link"}: ${window.location.href}?ref=${userId}`;

// ===== Leaderboard =====
function updateLeaderboard(){db.ref("scores/"+userId).set({name:userName,score:score});db.ref("scores").orderByChild("score").limitToLast(10).once("value",snap=>{let list=document.getElementById("leaderboardList");list.innerHTML="";let arr=[];snap.forEach(s=>{arr.push({name:s.val().name,score:s.val().score});});arr.sort((a,b)=>b.score-a.score);arr.forEach(e=>{let li=document.createElement("li");li.textContent=`${e.name}: ${e.score}`;list.appendChild(li);});});}
updateLeaderboard();
</script>
</body>
</html>
